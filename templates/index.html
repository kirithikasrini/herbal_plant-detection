<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ðŸŒ¿ Herbal Scape - Medicinal Plant Identification</title>

  <!-- Bootstrap + Google Fonts + FontAwesome -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://kit.fontawesome.com/a2d9d7f6b7.js" crossorigin="anonymous"></script>

  <!-- Custom CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <style>
    /* Keeping this inline as it uses Flask's url_for which can't be in external CSS easily without workarounds */
    body {
      background: linear-gradient(rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0.02)),
      url("{{ url_for('static', filename='images/background.jpg') }}") center/cover no-repeat fixed;
    }
  </style>
</head>

<body>
  <div class="main-wrapper">
    <div class="cards-row">
      <!-- LEFT upload card -->
      <div class="card-left">
        <div class="app-branding">
          <div class="app-icon">ðŸŒ¿</div>
          <div class="app-title">Herbal Scape</div>
        </div>
        <p class="app-tagline">Identify medicinal plants with artificial intelligence</p>

        <form action="/upload" method="post" enctype="multipart/form-data" id="uploadForm">
          <label for="file" class="custom-file-upload" id="fileLabel">
            <i class="fa-solid fa-camera"></i>
            <div class="upload-text">Click to upload plant image</div>
            <div class="file-name" id="fileName">No file selected</div>
          </label>
          <input type="file" id="file" name="file" accept="image/*" required>

          <div class="upload-btn-container">
            <button type="submit" class="btn btn-upload" id="submitBtn">Identify Plant</button>
          </div>
        </form>
      </div>

      <!-- Webcam Capture Section -->
      <div class="card mb-4 webcam-card">
        <div class="card-header webcam-header">
          <i class="fas fa-camera me-2"></i> Webcam Capture
        </div>
        <div class="card-body text-center p-4">
          <div id="webcam-container" class="webcam-wrapper">
            <div class="video-container">
              <video id="webcam" autoplay playsinline></video>
              <canvas id="canvas" style="display: none;"></canvas>
            </div>
          </div>

          <div id="capture-buttons" style="display: none;">
            <button id="capture-btn" class="btn btn-capture me-2">
              <i class="fas fa-camera me-2"></i>Capture Image
            </button>
            <button id="retake-btn" class="btn btn-retake">
              <i class="fas fa-redo me-2"></i>Retake
            </button>
          </div>

          <div id="start-buttons">
            <button id="start-webcam" class="btn btn-start-webcam">
              <i class="fas fa-video me-2"></i>Start Webcam
            </button>
            <p class="text-muted mt-2 mb-0">Or upload an image in the left panel</p>
          </div>
        </div>
      </div>
    </div>


    <!-- Season selector + default sample plants (pure HTML + JS) -->
    <div class="season-widget"
      style="max-width:1100px; margin:2rem auto; padding:2rem; background:#fff; border-radius:18px; box-shadow:0 10px 30px rgba(0,0,0,0.06);">
      <div style="display:flex; align-items:center; justify-content:space-between; gap:1rem; flex-wrap:wrap;">
        <div>
          <h2 style="margin:0; color:#1A5D1A; font-size:1.9rem;">ðŸŒ¿ Plants in Season</h2>
          <p style="margin:0.25rem 0 0; color:#6b6b6b;">Choose a season to see example plants and care tips</p>
        </div>
      </div>
      <hr style="margin:1rem 0; border:none; height:1px; background:#eef7ee;">

      <div id="seasonPlantsContainer" style="display:flex; gap:1rem; flex-wrap:wrap; justify-content:center;"></div>
    </div>

    <!-- Herbal Memory Game Section -->
    <div class="memory-game-section" style="margin: 3rem auto; max-width: 1000px; padding: 0 1rem;">
      <h2 style="text-align: center; color: #1A5D1A; margin-bottom: 1.5rem;">ðŸŒ¿ Herbal Memory Game</h2>
      <p style="text-align: center; color: #6b6b6b; margin-bottom: 2rem;">Test your knowledge! Match the herb with its
        name.</p>

      <div id="memory-game"
        style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin: 0 auto; max-width: 800px;">
        <!-- Cards will be generated by JavaScript -->
      </div>

      <div style="text-align: center; margin-top: 2rem;">
        <button id="reset-game"
          style="background: #2E7D32; color: white; border: none; padding: 10px 20px; border-radius: 50px; cursor: pointer; font-weight: 600; box-shadow: 0 4px 12px rgba(46,125,50,0.2);">
          ðŸ”„ New Game
        </button>
        <p id="moves-counter" style="margin-top: 1rem; color: #4b6b4b; font-weight: 500;">Moves: <span>0</span></p>
      </div>
    </div>
  </div>

  <!-- JS: Bootstrap bundle + page scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>

</html>